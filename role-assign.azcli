IDENTITY_NAME='aml-identity'
ROLE_NAME='OpenAICustomRole'
DATA_SCIENTIST_CUSTOM_ROLE_NAME='DataScientistCustom'
DATA_SCIENTIST_ID='datascientist@cloudydemos.com'

RESOURCE_GROUP='OpenAI-Demo'
SUBSCRIPTION_ID=$(az account show --query id --output tsv)

OBJECT_ID=$(az ad sp list --display-name $IDENTITY_NAME --query '[].id' --output tsv)

# Assign Custom role to User Managed identity
az role assignment create --assignee-object-id $OBJECT_ID --role $ROLE_NAME --scope /subscriptions/$SUBSCRIPTION_ID/resourceGroups/$RESOURCE_GROUP

# Assign Custom Data Scientist Role to Data Scientist User
az role assignment create --assignee $DATA_SCIENTIST_ID --role $DATA_SCIENTIST_CUSTOM_ROLE_NAME --scope /subscriptions/$SUBSCRIPTION_ID/resourceGroups/$RESOURCE_GROUP/providers/Microsoft.MachineLearningServices/workspaces/7adbtc7abmmu76xlsjmht2tn
